<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-commerce Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .product { border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .product h3 { color: #333; margin: 0 0 10px 0; }
        .product p { margin: 5px 0; }
        .price { font-weight: bold; color: #e74c3c; font-size: 18px; }
        .loading { text-align: center; padding: 20px; }
        .error { color: red; padding: 20px; }
        button { background: #3498db; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
        button:hover { background: #2980b9; }
    </style>
</head>
<body>
    <h1>üõçÔ∏è MERN E-commerce Store</h1>
    <div id="status">Loading products...</div>
    <div id="products"></div>

    <script>
        // Test data - sample products
        const sampleProducts = [
            {
                _id: '1',
                name: 'Handmade Plastic Pants',
                price: 29.99,
                description: 'Comfortable and stylish plastic pants for everyday wear.',
                isActive: true
            },
            {
                _id: '2',
                name: 'Ergonomic Cotton Shirt',
                price: 45.50,
                description: 'Soft cotton shirt with ergonomic design for maximum comfort.',
                isActive: true
            },
            {
                _id: '3',
                name: 'Modern Steel Watch',
                price: 199.99,
                description: 'Elegant steel watch with modern design and precision movement.',
                isActive: true
            },
            {
                _id: '4',
                name: 'Wireless Bluetooth Headphones',
                price: 89.99,
                description: 'High-quality wireless headphones with noise cancellation.',
                isActive: true
            },
            {
                _id: '5',
                name: 'Leather Wallet',
                price: 35.00,
                description: 'Premium leather wallet with multiple card slots.',
                isActive: true
            }
        ];

        function displayProducts(products) {
            const productsDiv = document.getElementById('products');
            const statusDiv = document.getElementById('status');
            
            if (products.length === 0) {
                statusDiv.innerHTML = '<div class="error">No products found</div>';
                return;
            }

            statusDiv.innerHTML = `<p>‚úÖ Found ${products.length} products</p>`;
            
            productsDiv.innerHTML = products.map(product => `
                <div class="product">
                    <h3>${product.name}</h3>
                    <p>${product.description}</p>
                    <p class="price">$${product.price}</p>
                    <button onclick="addToCart('${product._id}', '${product.name}')">Add to Cart</button>
                </div>
            `).join('');
        }

        function addToCart(id, name) {
            alert(`Added "${name}" to cart! üõí`);
        }

        // Try to fetch from API, fallback to sample data
        async function loadProducts() {
            try {
                console.log('Trying to fetch from API...');
                const response = await fetch('http://localhost:5000/api/product/list');
                
                if (response.ok) {
                    const data = await response.json();
                    console.log('API Response:', data);
                    displayProducts(data.products || []);
                } else {
                    throw new Error('API not available');
                }
            } catch (error) {
                console.log('API not available, using sample data:', error);
                document.getElementById('status').innerHTML = '<p>‚ö†Ô∏è Using sample data (API not connected)</p>';
                displayProducts(sampleProducts);
            }
        }

        // Load products when page loads
        window.onload = loadProducts;
    </script>
</body>
</html>
